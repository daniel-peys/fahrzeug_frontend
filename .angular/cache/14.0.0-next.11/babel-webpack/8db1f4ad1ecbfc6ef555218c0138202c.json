{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Student/Desktop/Fahrzeug/Fahrzeug-A2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _CreateFahrzeugComponent_instances, _CreateFahrzeugComponent_setProps, _CreateFahrzeugComponent_handleError, _CreateFahrzeugComponent_navigateHome;\n\nimport { __classPrivateFieldGet } from \"tslib\";\nimport { toFahrzeug } from './fahrzeugForm'; // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n\nimport { SaveError } from '../shared';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport log from 'loglevel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/error-message.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"./create-beschreibung.component\";\nimport * as i8 from \"./create-erstzulassung.component\";\nimport * as i9 from \"./create-fahrzeughalter.component\";\nimport * as i10 from \"./create-fahrzeugtyp.component\";\nimport * as i11 from \"./create-kennzeichen.component\";\nimport * as i12 from \"./create-kilometerstand.component\";\n\nfunction CreateFahrzeugComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"span\", 13)(3, \"i\", 8);\n    i0.ɵɵtext(4, \"warning\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"strong\", 14);\n    i0.ɵɵtext(6, \" Wenn Sie die Seite jetzt verlassen, verlieren Sie Ihre eingegebenen Daten. \");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n/**\r\n * component for the tag <create-fahrzeug>\r\n */\n\n\nexport class CreateFahrzeugComponent {\n  constructor(service, router, titleService) {\n    this.service = service;\n    this.router = router;\n    this.titleService = titleService;\n\n    _CreateFahrzeugComponent_instances.add(this);\n\n    this.createForm = new FormGroup({});\n    this.showWarning = false;\n    this.fertig = false;\n    this.errorMsg = undefined;\n    log.debug('CreateFahrzeugComponent.constructor: Injizierter Router:', router);\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Neues Fahrzeug');\n  }\n  /**\r\n   * this method realizes the onSubmit event handler for a new Fahrzeug\r\n   * @return false, to cancel the event\r\n   */\n\n\n  onSubmit() {\n    if (this.createForm.invalid) {\n      log.debug('CreateFahrzeugComponent.onSave: Validierungsfehler', this.createForm);\n    }\n\n    const fahrzeugForm = this.createForm.value;\n    const neuesFahrzeug = toFahrzeug(fahrzeugForm);\n    log.debug('CreateFahrzeugComponent.onSave: neuesFahrzeug=', neuesFahrzeug);\n    this.service.save(neuesFahrzeug).pipe(first(), tap(result => __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_setProps).call(this, result))).subscribe({\n      next: () => __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_navigateHome).call(this)\n    });\n  }\n\n}\n_CreateFahrzeugComponent_instances = new WeakSet(), _CreateFahrzeugComponent_setProps = function _CreateFahrzeugComponent_setProps(result) {\n  if (result instanceof SaveError) {\n    __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_handleError).call(this, result);\n\n    return;\n  }\n\n  this.fertig = true;\n  this.showWarning = false;\n  this.errorMsg = undefined;\n  const id = result;\n  log.debug('CreateFahrzeugComponent.#setProps: id=', id);\n}, _CreateFahrzeugComponent_handleError = function _CreateFahrzeugComponent_handleError(err) {\n  const {\n    statuscode\n  } = err;\n  log.debug(`CreateFahrzeugComponent.#handleError: statuscode=${statuscode}, err=`, err);\n\n  switch (statuscode) {\n    case 422\n    /* UnprocessableEntity */\n    :\n      {\n        const {\n          cause\n        } = err; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n        this.errorMsg = cause instanceof HttpErrorResponse ? cause.error : JSON.stringify(cause);\n        break;\n      }\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n      log.error('Laeuft der Appserver? Port-Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n      break;\n  }\n}, _CreateFahrzeugComponent_navigateHome = /*#__PURE__*/function () {\n  var _CreateFahrzeugComponent_navigateHome2 = _asyncToGenerator(function* () {\n    if (this.errorMsg === undefined) {\n      log.debug('CreateFahrzeugComponent.#navigateHome: Navigation');\n      yield this.router.navigate(['/']);\n    }\n  });\n\n  function _CreateFahrzeugComponent_navigateHome() {\n    return _CreateFahrzeugComponent_navigateHome2.apply(this, arguments);\n  }\n\n  return _CreateFahrzeugComponent_navigateHome;\n}();\n\nCreateFahrzeugComponent.ɵfac = function CreateFahrzeugComponent_Factory(t) {\n  return new (t || CreateFahrzeugComponent)(i0.ɵɵdirectiveInject(i1.FahrzeugWriteService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Title));\n};\n\nCreateFahrzeugComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateFahrzeugComponent,\n  selectors: [[\"hs-create-fahrzeug\"]],\n  decls: 24,\n  vars: 10,\n  consts: [[1, \"w-75\", \"d-flex\", \"flex-column\", \"align-items-center\", \"mx-auto\", \"mt-4\", \"mb-4\"], [1, \"ms-1\"], [\"role\", \"form\", 3, \"formGroup\", \"submit\"], [\"class\", \"row has-warning mb-4\", 4, \"ngIf\"], [3, \"createForm\"], [1, \"row\"], [1, \"col\", \"offset-2\", \"gy-3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"material-icons\"], [1, \"mt-3\"], [3, \"text\"], [1, \"row\", \"has-warning\", \"mb-4\"], [1, \"col\", \"col-12\", \"form-control-feedback\"], [1, \"alert\", \"alert-warning\"], [1, \"text-help\", \"ms-1\"]],\n  template: function CreateFahrzeugComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\")(2, \"span\", 1);\n      i0.ɵɵtext(3, \"Neues Fahrzeug\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\")(5, \"form\", 2);\n      i0.ɵɵlistener(\"submit\", function CreateFahrzeugComponent_Template_form_submit_5_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtemplate(6, CreateFahrzeugComponent_div_6_Template, 7, 0, \"div\", 3);\n      i0.ɵɵelement(7, \"hs-create-kennzeichen\", 4)(8, \"hs-create-beschreibung\", 4)(9, \"hs-create-fahrzeugtyp\", 4)(10, \"hs-create-erstzulassung\", 4)(11, \"hs-create-kilometerstand\", 4)(12, \"hs-create-fahrzeughalter\", 4);\n      i0.ɵɵelementStart(13, \"div\", 5)(14, \"div\", 6)(15, \"button\", 7)(16, \"i\", 8);\n      i0.ɵɵtext(17, \"check\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"span\", 1);\n      i0.ɵɵtext(19, \"Jetzt anlegen\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(20, \"small\");\n      i0.ɵɵtext(21, \"* sind Pflichtfelder\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"div\", 9);\n      i0.ɵɵelement(23, \"hs-error-message\", 10);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showWarning);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"createForm\", ctx.createForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.createForm.invalid);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"text\", ctx.errorMsg);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ErrorMessageComponent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.CreateBeschreibungComponent, i8.CreateErstzulassungComponent, i9.CreateFahrzeughalterComponent, i10.CreateFahrzeugtypComponent, i11.CreateKennzeichenComponent, i12.CreateKilometerstandComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;AAAA,IAAIA,kCAAJ,EAAwCC,iCAAxC,EAA2EC,oCAA3E,EAAiHC,qCAAjH;;AACA,SAASC,sBAAT,QAAuC,OAAvC;AACA,SAASC,UAAT,QAA2B,gBAA3B,C,CACA;;AACA,SAASC,SAAT,QAA0B,WAA1B;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,SAASC,KAAT,EAAgBC,GAAhB,QAA2B,gBAA3B;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,OAAOC,GAAP,MAAgB,UAAhB;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,WAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,kCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,mCAApB;AACA,OAAO,KAAKC,GAAZ,MAAqB,gCAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,gCAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,mCAArB;;AACA,SAASC,sCAAT,CAAgDC,EAAhD,EAAoDC,GAApD,EAAyD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACnEd,IAAAA,EAAE,CAACgB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B,EAAgC,CAAhC,EAAmC,KAAnC,EAA0C,EAA1C,EAA8C,CAA9C,EAAiD,MAAjD,EAAyD,EAAzD,EAA6D,CAA7D,EAAgE,GAAhE,EAAqE,CAArE;AACAhB,IAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV,EAAa,SAAb;AACAjB,IAAAA,EAAE,CAACkB,YAAH;AACAlB,IAAAA,EAAE,CAACgB,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,EAA/B;AACAhB,IAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV,EAAa,8EAAb;AACAjB,IAAAA,EAAE,CAACkB,YAAH;AACH;AAAE;AACH;AACA;AACA;;;AACA,OAAO,MAAMC,uBAAN,CAA8B;AACjCC,EAAAA,WAAW,CAACC,OAAD,EAAUC,MAAV,EAAkBC,YAAlB,EAAgC;AACvC,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,YAAL,GAAoBA,YAApB;;AACAnC,IAAAA,kCAAkC,CAACoC,GAAnC,CAAuC,IAAvC;;AACA,SAAKC,UAAL,GAAkB,IAAI3B,SAAJ,CAAc,EAAd,CAAlB;AACA,SAAK4B,WAAL,GAAmB,KAAnB;AACA,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKC,QAAL,GAAgBC,SAAhB;AACA9B,IAAAA,GAAG,CAAC+B,KAAJ,CAAU,0DAAV,EAAsER,MAAtE;AACH;;AACDS,EAAAA,QAAQ,GAAG;AACP,SAAKR,YAAL,CAAkBS,QAAlB,CAA2B,gBAA3B;AACH;AACD;AACJ;AACA;AACA;;;AACIC,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKR,UAAL,CAAgBS,OAApB,EAA6B;AACzBnC,MAAAA,GAAG,CAAC+B,KAAJ,CAAU,oDAAV,EAAgE,KAAKL,UAArE;AACH;;AACD,UAAMU,YAAY,GAAG,KAAKV,UAAL,CAAgBW,KAArC;AACA,UAAMC,aAAa,GAAG5C,UAAU,CAAC0C,YAAD,CAAhC;AACApC,IAAAA,GAAG,CAAC+B,KAAJ,CAAU,gDAAV,EAA4DO,aAA5D;AACA,SAAKhB,OAAL,CACKiB,IADL,CACUD,aADV,EAEKE,IAFL,CAEU3C,KAAK,EAFf,EAEmBC,GAAG,CAAC2C,MAAM,IAAIhD,sBAAsB,CAAC,IAAD,EAAOJ,kCAAP,EAA2C,GAA3C,EAAgDC,iCAAhD,CAAtB,CAAyGoD,IAAzG,CAA8G,IAA9G,EAAoHD,MAApH,CAAX,CAFtB,EAGKE,SAHL,CAGe;AAAEC,MAAAA,IAAI,EAAE,MAAMnD,sBAAsB,CAAC,IAAD,EAAOJ,kCAAP,EAA2C,GAA3C,EAAgDG,qCAAhD,CAAtB,CAA6GkD,IAA7G,CAAkH,IAAlH;AAAd,KAHf;AAIH;;AA9BgC;AAgCrCrD,kCAAkC,GAAG,IAAIwD,OAAJ,EAArC,EAAoDvD,iCAAiC,GAAG,SAASA,iCAAT,CAA2CmD,MAA3C,EAAmD;AACvI,MAAIA,MAAM,YAAY9C,SAAtB,EAAiC;AAC7BF,IAAAA,sBAAsB,CAAC,IAAD,EAAOJ,kCAAP,EAA2C,GAA3C,EAAgDE,oCAAhD,CAAtB,CAA4GmD,IAA5G,CAAiH,IAAjH,EAAuHD,MAAvH;;AACA;AACH;;AACD,OAAKb,MAAL,GAAc,IAAd;AACA,OAAKD,WAAL,GAAmB,KAAnB;AACA,OAAKE,QAAL,GAAgBC,SAAhB;AACA,QAAMgB,EAAE,GAAGL,MAAX;AACAzC,EAAAA,GAAG,CAAC+B,KAAJ,CAAU,wCAAV,EAAoDe,EAApD;AACH,CAVD,EAUGvD,oCAAoC,GAAG,SAASA,oCAAT,CAA8CwD,GAA9C,EAAmD;AACzF,QAAM;AAAEC,IAAAA;AAAF,MAAiBD,GAAvB;AACA/C,EAAAA,GAAG,CAAC+B,KAAJ,CAAW,oDAAmDiB,UAAW,QAAzE,EAAkFD,GAAlF;;AACA,UAAQC,UAAR;AACI,SAAK;AAAI;AAAT;AAAoC;AAChC,cAAM;AAAEC,UAAAA;AAAF,YAAYF,GAAlB,CADgC,CAEhC;;AACA,aAAKlB,QAAL,GACIoB,KAAK,YAAYrD,iBAAjB,GACMqD,KAAK,CAACC,KADZ,GAEMC,IAAI,CAACC,SAAL,CAAeH,KAAf,CAHV;AAIA;AACH;;AACD,SAAK;AAAI;AAAT;AACI,WAAKpB,QAAL,GACI,+DADJ;AAEA;;AACJ,SAAK;AAAI;AAAT;AACI,WAAKA,QAAL,GAAgB,sCAAhB;AACA7B,MAAAA,GAAG,CAACkD,KAAJ,CAAU,wCAAV;AACA;;AACJ;AACI,WAAKrB,QAAL,GAAgB,yCAAhB;AACA;AApBR;AAsBH,CAnCD,EAmCGrC,qCAAqC;AAAA,iEAAG,aAAuD;AAC9F,QAAI,KAAKqC,QAAL,KAAkBC,SAAtB,EAAiC;AAC7B9B,MAAAA,GAAG,CAAC+B,KAAJ,CAAU,mDAAV;AACA,YAAM,KAAKR,MAAL,CAAY8B,QAAZ,CAAqB,CAAC,GAAD,CAArB,CAAN;AACH;AACJ,GALuC;;AAAA,WAAkB7D,qCAAlB;AAAA;AAAA;;AAAA,SAAkBA,qCAAlB;AAAA,GAnCxC;;AAyCA4B,uBAAuB,CAACkC,IAAxB,GAA+B,SAASC,+BAAT,CAAyCC,CAAzC,EAA4C;AAAE,SAAO,KAAKA,CAAC,IAAIpC,uBAAV,EAAmCnB,EAAE,CAACwD,iBAAH,CAAqBvD,EAAE,CAACwD,oBAAxB,CAAnC,EAAkFzD,EAAE,CAACwD,iBAAH,CAAqBtD,EAAE,CAACwD,MAAxB,CAAlF,EAAmH1D,EAAE,CAACwD,iBAAH,CAAqBrD,EAAE,CAACwD,KAAxB,CAAnH,CAAP;AAA4J,CAAzO;;AACAxC,uBAAuB,CAACyC,IAAxB,GAA+B,aAAc5D,EAAE,CAAC6D,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE3C,uBAAR;AAAiC4C,EAAAA,SAAS,EAAE,CAAC,CAAC,oBAAD,CAAD,CAA5C;AAAsEC,EAAAA,KAAK,EAAE,EAA7E;AAAiFC,EAAAA,IAAI,EAAE,EAAvF;AAA2FC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,EAAY,QAAZ,EAAsB,aAAtB,EAAqC,oBAArC,EAA2D,SAA3D,EAAsE,MAAtE,EAA8E,MAA9E,CAAD,EAAwF,CAAC,CAAD,EAAI,MAAJ,CAAxF,EAAqG,CAAC,MAAD,EAAS,MAAT,EAAiB,CAAjB,EAAoB,WAApB,EAAiC,QAAjC,CAArG,EAAiJ,CAAC,OAAD,EAAU,sBAAV,EAAkC,CAAlC,EAAqC,MAArC,CAAjJ,EAA+L,CAAC,CAAD,EAAI,YAAJ,CAA/L,EAAkN,CAAC,CAAD,EAAI,KAAJ,CAAlN,EAA8N,CAAC,CAAD,EAAI,KAAJ,EAAW,UAAX,EAAuB,MAAvB,CAA9N,EAA8P,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,UAA/C,CAA9P,EAA0T,CAAC,CAAD,EAAI,gBAAJ,CAA1T,EAAiV,CAAC,CAAD,EAAI,MAAJ,CAAjV,EAA8V,CAAC,CAAD,EAAI,MAAJ,CAA9V,EAA2W,CAAC,CAAD,EAAI,KAAJ,EAAW,aAAX,EAA0B,MAA1B,CAA3W,EAA8Y,CAAC,CAAD,EAAI,KAAJ,EAAW,QAAX,EAAqB,uBAArB,CAA9Y,EAA6b,CAAC,CAAD,EAAI,OAAJ,EAAa,eAAb,CAA7b,EAA4d,CAAC,CAAD,EAAI,WAAJ,EAAiB,MAAjB,CAA5d,CAAnG;AAA0lBC,EAAAA,QAAQ,EAAE,SAASC,gCAAT,CAA0CtD,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC/tBd,MAAAA,EAAE,CAACgB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,KAAlC,EAAyC,CAAzC,EAA4C,MAA5C,EAAoD,CAApD;AACAhB,MAAAA,EAAE,CAACiB,MAAH,CAAU,CAAV,EAAa,gBAAb;AACAjB,MAAAA,EAAE,CAACkB,YAAH;AACAlB,MAAAA,EAAE,CAACgB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,MAA/B,EAAuC,CAAvC;AACAhB,MAAAA,EAAE,CAACqE,UAAH,CAAc,QAAd,EAAwB,SAASC,uDAAT,GAAmE;AAAE,eAAOvD,GAAG,CAACkB,QAAJ,EAAP;AAAwB,OAArH;AACAjC,MAAAA,EAAE,CAACuE,UAAH,CAAc,CAAd,EAAiB1D,sCAAjB,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,KAA/D,EAAsE,CAAtE;AACAb,MAAAA,EAAE,CAACwE,SAAH,CAAa,CAAb,EAAgB,uBAAhB,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,wBAA/C,EAAyE,CAAzE,EAA4E,CAA5E,EAA+E,uBAA/E,EAAwG,CAAxG,EAA2G,EAA3G,EAA+G,yBAA/G,EAA0I,CAA1I,EAA6I,EAA7I,EAAiJ,0BAAjJ,EAA6K,CAA7K,EAAgL,EAAhL,EAAoL,0BAApL,EAAgN,CAAhN;AACAxE,MAAAA,EAAE,CAACgB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B,EAAgC,EAAhC,EAAoC,KAApC,EAA2C,CAA3C,EAA8C,EAA9C,EAAkD,QAAlD,EAA4D,CAA5D,EAA+D,EAA/D,EAAmE,GAAnE,EAAwE,CAAxE;AACAhB,MAAAA,EAAE,CAACiB,MAAH,CAAU,EAAV,EAAc,OAAd;AACAjB,MAAAA,EAAE,CAACkB,YAAH;AACAlB,MAAAA,EAAE,CAACgB,cAAH,CAAkB,EAAlB,EAAsB,MAAtB,EAA8B,CAA9B;AACAhB,MAAAA,EAAE,CAACiB,MAAH,CAAU,EAAV,EAAc,eAAd;AACAjB,MAAAA,EAAE,CAACkB,YAAH;AACAlB,MAAAA,EAAE,CAACgB,cAAH,CAAkB,EAAlB,EAAsB,OAAtB;AACAhB,MAAAA,EAAE,CAACiB,MAAH,CAAU,EAAV,EAAc,sBAAd;AACAjB,MAAAA,EAAE,CAACkB,YAAH;AACAlB,MAAAA,EAAE,CAACgB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B;AACAhB,MAAAA,EAAE,CAACwE,SAAH,CAAa,EAAb,EAAiB,kBAAjB,EAAqC,EAArC;AACAxE,MAAAA,EAAE,CAACkB,YAAH;AACH;;AAAC,QAAIJ,EAAE,GAAG,CAAT,EAAY;AACVd,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,WAAd,EAA2B3D,GAAG,CAACU,UAA/B;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,MAAd,EAAsB3D,GAAG,CAACW,WAA1B;AACA1B,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,YAAd,EAA4B3D,GAAG,CAACU,UAAhC;AACAzB,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,UAAd,EAA0B3D,GAAG,CAACU,UAAJ,CAAeS,OAAzC;AACAlC,MAAAA,EAAE,CAACyE,SAAH,CAAa,CAAb;AACAzE,MAAAA,EAAE,CAAC0E,UAAH,CAAc,MAAd,EAAsB3D,GAAG,CAACa,QAA1B;AACH;AAAE,GAzC2D;AAyCzD+C,EAAAA,YAAY,EAAE,CAACvE,EAAE,CAACwE,IAAJ,EAAUvE,EAAE,CAACwE,qBAAb,EAAoCvE,EAAE,CAACwE,aAAvC,EAAsDxE,EAAE,CAACyE,oBAAzD,EAA+EzE,EAAE,CAAC0E,kBAAlF,EAAsGzE,EAAE,CAAC0E,2BAAzG,EAAsIzE,EAAE,CAAC0E,4BAAzI,EAAuKzE,EAAE,CAAC0E,6BAA1K,EAAyMzE,GAAG,CAAC0E,0BAA7M,EAAyOzE,GAAG,CAAC0E,0BAA7O,EAAyQzE,GAAG,CAAC0E,6BAA7Q,CAzC2C;AAyCkQC,EAAAA,aAAa,EAAE;AAzCjR,CAArB,CAA7C","names":["toFahrzeug","SaveError","HttpErrorResponse","first","tap","FormGroup","log","i0","CreateFahrzeugComponent","constructor","service","router","titleService","undefined","debug","ngOnInit","setTitle","onSubmit","createForm","invalid","fahrzeugForm","value","neuesFahrzeug","save","pipe","result","__classPrivateFieldGet","_CreateFahrzeugComponent_instances","_CreateFahrzeugComponent_setProps","call","subscribe","next","_CreateFahrzeugComponent_navigateHome","_CreateFahrzeugComponent_handleError","fertig","showWarning","errorMsg","id","err","statuscode","cause","error","JSON","stringify","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Student\\Desktop\\Fahrzeug\\Fahrzeug-A2\\src\\app\\fahrzeug\\create-fahrzeug\\create-fahrzeug.component.ts","C:\\Users\\Student\\Desktop\\Fahrzeug\\Fahrzeug-A2\\src\\app\\fahrzeug\\create-fahrzeug\\create-fahrzeug.component.html"],"sourcesContent":["import { Component, type OnInit } from '@angular/core';\nimport { type FahrzeugForm, toFahrzeug } from './fahrzeugForm';\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport { FahrzeugWriteService, SaveError } from '../shared';\nimport { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Title } from '@angular/platform-browser'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport log from 'loglevel';\n\n/**\n * component for the tag <create-fahrzeug>\n */\n@Component({\n    selector: 'hs-create-fahrzeug',\n    templateUrl: './create-fahrzeug.component.html',\n})\nexport class CreateFahrzeugComponent implements OnInit {\n    readonly createForm = new FormGroup({});\n\n    showWarning = false;\n\n    fertig = false;\n\n    errorMsg: string | undefined = undefined;\n\n    constructor(\n        private readonly service: FahrzeugWriteService,\n        private readonly router: Router,\n        private readonly titleService: Title,\n    ) {\n        log.debug(\n            'CreateFahrzeugComponent.constructor: Injizierter Router:',\n            router,\n        );\n    }\n\n    ngOnInit() {\n        this.titleService.setTitle('Neues Fahrzeug');\n    }\n\n    /**\n     * this method realizes the onSubmit event handler for a new Fahrzeug\n     * @return false, to cancel the event\n     */\n    onSubmit() {\n        if (this.createForm.invalid) {\n            log.debug(\n                'CreateFahrzeugComponent.onSave: Validierungsfehler',\n                this.createForm,\n            );\n        }\n\n        const fahrzeugForm = this.createForm.value as FahrzeugForm;\n        const neuesFahrzeug = toFahrzeug(fahrzeugForm);\n        log.debug(\n            'CreateFahrzeugComponent.onSave: neuesFahrzeug=',\n            neuesFahrzeug,\n        );\n\n        this.service\n            .save(neuesFahrzeug)\n            .pipe(\n                first(),\n                tap(result => this.#setProps(result)),\n            )\n            .subscribe({ next: () => this.#navigateHome() });\n    }\n\n    #setProps(result: SaveError | string) {\n        if (result instanceof SaveError) {\n            this.#handleError(result);\n            return;\n        }\n\n        this.fertig = true;\n        this.showWarning = false;\n        this.errorMsg = undefined;\n\n        const id = result;\n        log.debug('CreateFahrzeugComponent.#setProps: id=', id);\n    }\n\n    #handleError(err: SaveError) {\n        const { statuscode } = err;\n        log.debug(\n            `CreateFahrzeugComponent.#handleError: statuscode=${statuscode}, err=`,\n            err,\n        );\n\n        switch (statuscode) {\n            case HttpStatusCode.UnprocessableEntity: {\n                const { cause } = err;\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this.errorMsg =\n                    cause instanceof HttpErrorResponse\n                        ? cause.error\n                        : JSON.stringify(cause);\n                break;\n            }\n\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg =\n                    'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n                break;\n\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n                log.error('Laeuft der Appserver? Port-Forwarding?');\n                break;\n\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n                break;\n        }\n    }\n\n    async #navigateHome() {\n        if (this.errorMsg === undefined) {\n            log.debug('CreateFahrzeugComponent.#navigateHome: Navigation');\n            await this.router.navigate(['/']);\n        }\n    }\n}\n","<div class=\"w-75 d-flex flex-column align-items-center mx-auto mt-4 mb-4\">\n  <div>\n    <span class=\"ms-1\">Neues Fahrzeug</span>\n  </div>\n\n  <div>\n    <form [formGroup]=\"createForm\" role=\"form\" (submit)=\"onSubmit()\">\n      <div class=\"row has-warning mb-4\" *ngIf=\"showWarning\">\n        <div class=\"col col-12 form-control-feedback\">\n          <span class=\"alert alert-warning\">\n            <i class=\"material-icons\">warning</i>\n            <strong class=\"text-help ms-1\">\n              Wenn Sie die Seite jetzt verlassen, verlieren Sie Ihre\n              eingegebenen Daten.\n            </strong>\n          </span>\n        </div>\n      </div>\n\n      <hs-create-kennzeichen [createForm]=\"createForm\"></hs-create-kennzeichen>\n      <hs-create-beschreibung\n        [createForm]=\"createForm\"\n      ></hs-create-beschreibung>\n      <hs-create-fahrzeugtyp [createForm]=\"createForm\"></hs-create-fahrzeugtyp>\n      <hs-create-erstzulassung\n        [createForm]=\"createForm\"\n      ></hs-create-erstzulassung>\n      <hs-create-kilometerstand\n        [createForm]=\"createForm\"\n      ></hs-create-kilometerstand>\n      <hs-create-fahrzeughalter\n        [createForm]=\"createForm\"\n      ></hs-create-fahrzeughalter>\n\n      <div class=\"row\">\n        <div class=\"col offset-2 gy-3\">\n          <!-- [disabled]=\"...\" fuer Input (= Property Binding) -->\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary\"\n            [disabled]=\"createForm.invalid\"\n          >\n            <i class=\"material-icons\">check</i>\n            <span class=\"ms-1\">Jetzt anlegen</span>\n          </button>\n        </div>\n      </div>\n    </form>\n\n    <small>* sind Pflichtfelder</small>\n  </div>\n</div>\n\n<div class=\"mt-3\">\n  <hs-error-message [text]=\"errorMsg\"></hs-error-message>\n</div>\n"]},"metadata":{},"sourceType":"module"}