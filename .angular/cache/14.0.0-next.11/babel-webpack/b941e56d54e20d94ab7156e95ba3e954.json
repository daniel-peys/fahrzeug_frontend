{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Student/Desktop/Fahrzeug/Fahrzeug-A2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _UpdateFahrzeugComponent_instances, _UpdateFahrzeugComponent_setProps, _UpdateFahrzeugComponent_handleFindError, _UpdateFahrzeugComponent_handleUpdateResult, _UpdateFahrzeugComponent_navigateHome;\n\nimport { __classPrivateFieldGet } from \"tslib\"; // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n\nimport { FindError, UpdateError } from '../shared';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport log from 'loglevel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/error-message.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"./update-beschreibung.component\";\nimport * as i8 from \"./update-fahrzeughalter.component\";\nimport * as i9 from \"./update-fahrzeugtyp.component\";\nimport * as i10 from \"./update-kennzeichen.component\";\nimport * as i11 from \"./update-kilometerstand.component\";\n\nfunction UpdateFahrzeugComponent_section_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 2)(1, \"div\", 3)(2, \"i\", 4);\n    i0.ɵɵtext(3, \"local_shipping\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"form\", 7);\n    i0.ɵɵlistener(\"submit\", function UpdateFahrzeugComponent_section_0_Template_form_submit_7_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSubmit());\n    });\n    i0.ɵɵelement(8, \"hs-update-kennzeichen\", 8)(9, \"hs-update-beschreibung\", 8)(10, \"hs-update-fahrzeugtyp\", 8)(11, \"hs-update-kilometerstand\", 8)(12, \"hs-update-fahrzeughalter\", 9);\n    i0.ɵɵelementStart(13, \"button\", 10)(14, \"i\", 4);\n    i0.ɵɵtext(15, \"check\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\", 5);\n    i0.ɵɵtext(17, \"Stammdaten aktualisieren\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Fahrzeug \", ctx_r0.fahrzeug.id, \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.updateForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.fahrzeug.kennzeichen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.fahrzeug.beschreibung);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.fahrzeug.fahrzeugtype);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.fahrzeug.kilometerstand);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValueVorname\", ctx_r0.fahrzeug.fahrzeughalter.vorname)(\"currentValueNachname\", ctx_r0.fahrzeug.fahrzeughalter.nachname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.updateForm.pristine || ctx_r0.updateForm.invalid);\n  }\n}\n/**\r\n * component for the tag <code>hs-update-buch</code>\r\n */\n\n\nexport class UpdateFahrzeugComponent {\n  // eslint-disable-next-line max-params\n  constructor(service, readService, titleService, router, route) {\n    this.service = service;\n    this.readService = readService;\n    this.titleService = titleService;\n    this.router = router;\n    this.route = route;\n\n    _UpdateFahrzeugComponent_instances.add(this);\n\n    this.updateForm = new FormGroup({});\n    log.debug('UpdateFahrzeugComponent.constructor()');\n  }\n\n  ngOnInit() {\n    var _a; // path params from /fahrzeuge/:id/update\n\n\n    const id = (_a = this.route.snapshot.paramMap.get('id')) !== null && _a !== void 0 ? _a : undefined;\n    this.readService.findById(id).pipe(first(), tap(result => {\n      __classPrivateFieldGet(this, _UpdateFahrzeugComponent_instances, \"m\", _UpdateFahrzeugComponent_setProps).call(this, result);\n\n      log.debug('UpdateFahrzeugComponent.ngOnInit: fahrzeug=', this.fahrzeug);\n    })).subscribe();\n  }\n  /**\r\n   * Write back the recent data for the viewed fahrzeug-object\r\n   * @return false to cancel the event\r\n   */\n\n\n  onSubmit() {\n    if (this.updateForm.pristine || this.fahrzeug === undefined) {\n      log.debug('UpdateFahrzeugComponent.onSubmit: keine Änderungen');\n      return;\n    }\n\n    const {\n      beschreibung\n    } = this.updateForm.value;\n    const {\n      kennzeichen\n    } = this.updateForm.value;\n    const {\n      kilometerstand\n    } = this.updateForm.value;\n    const {\n      fahrzeugtype\n    } = this.updateForm.value;\n    const {\n      vorname\n    } = this.updateForm.value;\n    const {\n      nachname\n    } = this.updateForm.value;\n    const {\n      fahrzeug,\n      service\n    } = this; // erstzulassung can't be changed in the form\n\n    fahrzeug.beschreibung = beschreibung;\n    fahrzeug.fahrzeugtype = fahrzeugtype;\n    fahrzeug.kennzeichen = kennzeichen;\n    fahrzeug.kilometerstand = kilometerstand;\n    fahrzeug.fahrzeughalter.vorname = vorname;\n    fahrzeug.fahrzeughalter.nachname = nachname;\n    log.debug('UpdateFahrzeugComponent.onSubmit: fahrzeug=', fahrzeug);\n    service.update(fahrzeug).pipe(first(), tap(result => __classPrivateFieldGet(this, _UpdateFahrzeugComponent_instances, \"m\", _UpdateFahrzeugComponent_handleUpdateResult).call(this, result))).subscribe({\n      next: () => __classPrivateFieldGet(this, _UpdateFahrzeugComponent_instances, \"m\", _UpdateFahrzeugComponent_navigateHome).call(this)\n    });\n    return false;\n  }\n\n}\n_UpdateFahrzeugComponent_instances = new WeakSet(), _UpdateFahrzeugComponent_setProps = function _UpdateFahrzeugComponent_setProps(result) {\n  if (result instanceof FindError) {\n    __classPrivateFieldGet(this, _UpdateFahrzeugComponent_instances, \"m\", _UpdateFahrzeugComponent_handleFindError).call(this, result);\n\n    return;\n  }\n\n  this.fahrzeug = result;\n  this.errorMsg = undefined;\n  const titel = `Aktualisieren ${this.fahrzeug.id}`;\n  this.titleService.setTitle(titel);\n}, _UpdateFahrzeugComponent_handleFindError = function _UpdateFahrzeugComponent_handleFindError(err) {\n  const {\n    statuscode\n  } = err;\n  log.debug('UpdateFahrzeugComponent.#handleError: statuscode=', statuscode);\n  this.fahrzeug = undefined;\n\n  switch (statuscode) {\n    case 404\n    /* NotFound */\n    :\n      this.errorMsg = 'Kein Fahrzeug gefunden.';\n      break;\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n      log.error('Laeuft der Appserver? Port-Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n      break;\n  }\n}, _UpdateFahrzeugComponent_handleUpdateResult = function _UpdateFahrzeugComponent_handleUpdateResult(result) {\n  if (!(result instanceof UpdateError)) {\n    return;\n  }\n\n  const {\n    statuscode\n  } = result;\n  log.debug('UpdateStammdatenComponent.#handleError: statuscode=', statuscode);\n\n  switch (statuscode) {\n    case 422\n    /* UnprocessableEntity */\n    :\n      {\n        const {\n          cause\n        } = result; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n        this.errorMsg = cause instanceof HttpErrorResponse ? cause.error : JSON.stringify(cause);\n        break;\n      }\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n      log.error('Laeuft der Appserver? Port-Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n      break;\n  }\n\n  log.debug('UpdateStammdatenComponent.#handleError: errorMsg=', this.errorMsg);\n}, _UpdateFahrzeugComponent_navigateHome = /*#__PURE__*/function () {\n  var _UpdateFahrzeugComponent_navigateHome2 = _asyncToGenerator(function* () {\n    yield this.router.navigate(['/']);\n  });\n\n  function _UpdateFahrzeugComponent_navigateHome() {\n    return _UpdateFahrzeugComponent_navigateHome2.apply(this, arguments);\n  }\n\n  return _UpdateFahrzeugComponent_navigateHome;\n}();\n\nUpdateFahrzeugComponent.ɵfac = function UpdateFahrzeugComponent_Factory(t) {\n  return new (t || UpdateFahrzeugComponent)(i0.ɵɵdirectiveInject(i1.FahrzeugWriteService), i0.ɵɵdirectiveInject(i1.FahrzeugReadService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nUpdateFahrzeugComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UpdateFahrzeugComponent,\n  selectors: [[\"hs-update-fahrzeug\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"w-75 d-flex flex-column align-items-center mx-auto mt-4 mb-4\", 4, \"ngIf\"], [3, \"text\"], [1, \"w-75\", \"d-flex\", \"flex-column\", \"align-items-center\", \"mx-auto\", \"mt-4\", \"mb-4\"], [1, \"d-flex\", \"align-items-center\", \"mb-3\"], [1, \"material-icons\"], [1, \"ms-1\"], [1, \"container\"], [\"role\", \"form\", 3, \"formGroup\", \"submit\"], [3, \"updateForm\", \"currentValue\"], [3, \"updateForm\", \"currentValueVorname\", \"currentValueNachname\"], [\"type\", \"submit\", 1, \"btn\", \"btn-tertiary\", \"d-flex\", \"align-items-center\", \"ms-1\", 3, \"disabled\"]],\n  template: function UpdateFahrzeugComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, UpdateFahrzeugComponent_section_0_Template, 18, 14, \"section\", 0);\n      i0.ɵɵelement(1, \"hs-error-message\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.fahrzeug);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"text\", ctx.errorMsg);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ErrorMessageComponent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.UpdateBeschreibungComponent, i8.UpdateFahrzeughalterComponent, i9.UpdateFahrzeugtypComponent, i10.UpdateKennzeichenComponent, i11.UpdateKilometerstandComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["FindError","UpdateError","HttpErrorResponse","first","tap","FormGroup","log","i0","ctx_r0","UpdateFahrzeugComponent","constructor","service","readService","titleService","router","route","debug","ngOnInit","id","snapshot","paramMap","get","_a","undefined","findById","pipe","result","__classPrivateFieldGet","_UpdateFahrzeugComponent_instances","_UpdateFahrzeugComponent_setProps","call","fahrzeug","subscribe","onSubmit","updateForm","pristine","beschreibung","value","kennzeichen","kilometerstand","fahrzeugtype","vorname","nachname","fahrzeughalter","update","_UpdateFahrzeugComponent_handleUpdateResult","next","_UpdateFahrzeugComponent_navigateHome","_UpdateFahrzeugComponent_handleFindError","errorMsg","titel","setTitle","err","statuscode","error","cause","JSON","stringify","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Student\\Desktop\\Fahrzeug\\Fahrzeug-A2\\src\\app\\fahrzeug\\update-fahrzeug\\update-fahrzeug.component.ts","C:\\Users\\Student\\Desktop\\Fahrzeug\\Fahrzeug-A2\\src\\app\\fahrzeug\\update-fahrzeug\\update-fahrzeug.component.html"],"sourcesContent":["import { ActivatedRoute, Router } from '@angular/router'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Component, type OnInit } from '@angular/core';\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport {\n    type Fahrzeug,\n    FahrzeugReadService,\n    FahrzeugWriteService,\n    type Fahrzeugtyp,\n    FindError,\n    UpdateError,\n} from '../shared';\nimport { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport { Title } from '@angular/platform-browser'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport log from 'loglevel';\n\n/**\n * component for the tag <code>hs-update-buch</code>\n */\n@Component({\n    selector: 'hs-update-fahrzeug',\n    templateUrl: './update-fahrzeug.component.html',\n})\nexport class UpdateFahrzeugComponent implements OnInit {\n    fahrzeug: Fahrzeug | undefined;\n\n    readonly updateForm = new FormGroup({});\n\n    errorMsg: string | undefined;\n\n    // eslint-disable-next-line max-params\n    constructor(\n        private readonly service: FahrzeugWriteService,\n        private readonly readService: FahrzeugReadService,\n        private readonly titleService: Title,\n        private readonly router: Router,\n        private readonly route: ActivatedRoute,\n    ) {\n        log.debug('UpdateFahrzeugComponent.constructor()');\n    }\n\n    ngOnInit() {\n        // path params from /fahrzeuge/:id/update\n        const id = this.route.snapshot.paramMap.get('id') ?? undefined;\n\n        this.readService\n            .findById(id)\n            .pipe(\n                first(),\n                tap(result => {\n                    this.#setProps(result);\n                    log.debug(\n                        'UpdateFahrzeugComponent.ngOnInit: fahrzeug=',\n                        this.fahrzeug,\n                    );\n                }),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Write back the recent data for the viewed fahrzeug-object\n     * @return false to cancel the event\n     */\n    onSubmit() {\n        if (this.updateForm.pristine || this.fahrzeug === undefined) {\n            log.debug('UpdateFahrzeugComponent.onSubmit: keine Änderungen');\n            return;\n        }\n\n        const { beschreibung } = this.updateForm.value as {\n            beschreibung: string;\n        };\n        const { kennzeichen } = this.updateForm.value as {\n            kennzeichen: string;\n        };\n        const { kilometerstand } = this.updateForm.value as {\n            kilometerstand: number;\n        };\n        const { fahrzeugtype } = this.updateForm.value as {\n            fahrzeugtype: Fahrzeugtyp;\n        };\n        const { vorname } = this.updateForm.value as { vorname: string };\n        const { nachname } = this.updateForm.value as { nachname: string };\n\n        const { fahrzeug, service } = this;\n\n        // erstzulassung can't be changed in the form\n        fahrzeug.beschreibung = beschreibung;\n        fahrzeug.fahrzeugtype = fahrzeugtype;\n        fahrzeug.kennzeichen = kennzeichen;\n        fahrzeug.kilometerstand = kilometerstand;\n        fahrzeug.fahrzeughalter.vorname = vorname;\n        fahrzeug.fahrzeughalter.nachname = nachname;\n\n        log.debug('UpdateFahrzeugComponent.onSubmit: fahrzeug=', fahrzeug);\n\n        service\n            .update(fahrzeug)\n            .pipe(\n                first(),\n                tap(result => this.#handleUpdateResult(result)),\n            )\n            .subscribe({ next: () => this.#navigateHome() });\n\n        return false;\n    }\n\n    #setProps(result: Fahrzeug | FindError) {\n        if (result instanceof FindError) {\n            this.#handleFindError(result);\n            return;\n        }\n\n        this.fahrzeug = result;\n        this.errorMsg = undefined;\n\n        const titel = `Aktualisieren ${this.fahrzeug.id}`;\n        this.titleService.setTitle(titel);\n    }\n\n    #handleFindError(err: FindError) {\n        const { statuscode } = err;\n        log.debug(\n            'UpdateFahrzeugComponent.#handleError: statuscode=',\n            statuscode,\n        );\n\n        this.fahrzeug = undefined;\n\n        switch (statuscode) {\n            case HttpStatusCode.NotFound:\n                this.errorMsg = 'Kein Fahrzeug gefunden.';\n                break;\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg =\n                    'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n                break;\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n                log.error('Laeuft der Appserver? Port-Forwarding?');\n                break;\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n                break;\n        }\n    }\n\n    #handleUpdateResult(result: Fahrzeug | UpdateError) {\n        if (!(result instanceof UpdateError)) {\n            return;\n        }\n\n        const { statuscode } = result;\n        log.debug(\n            'UpdateStammdatenComponent.#handleError: statuscode=',\n            statuscode,\n        );\n\n        switch (statuscode) {\n            case HttpStatusCode.UnprocessableEntity: {\n                const { cause } = result;\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this.errorMsg =\n                    cause instanceof HttpErrorResponse\n                        ? cause.error\n                        : JSON.stringify(cause);\n                break;\n            }\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg =\n                    'Zu viele Anfragen. Bitte versuchen Sie es später noch einmal.';\n                break;\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n                log.error('Laeuft der Appserver? Port-Forwarding?');\n                break;\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n                break;\n        }\n\n        log.debug(\n            'UpdateStammdatenComponent.#handleError: errorMsg=',\n            this.errorMsg,\n        );\n    }\n\n    async #navigateHome() {\n        await this.router.navigate(['/']);\n    }\n}\n","<section\n  class=\"w-75 d-flex flex-column align-items-center mx-auto mt-4 mb-4\"\n  *ngIf=\"fahrzeug\"\n>\n  <div class=\"d-flex align-items-center mb-3\">\n    <i class=\"material-icons\">local_shipping</i>\n    <span class=\"ms-1\">Fahrzeug {{ fahrzeug.id }}:</span>\n  </div>\n\n  <div class=\"container\">\n    <form [formGroup]=\"updateForm\" role=\"form\" (submit)=\"onSubmit()\">\n      <hs-update-kennzeichen\n        [updateForm]=\"updateForm\"\n        [currentValue]=\"fahrzeug.kennzeichen\"\n      ></hs-update-kennzeichen>\n      <hs-update-beschreibung\n        [updateForm]=\"updateForm\"\n        [currentValue]=\"fahrzeug.beschreibung\"\n      ></hs-update-beschreibung>\n      <hs-update-fahrzeugtyp\n        [updateForm]=\"updateForm\"\n        [currentValue]=\"fahrzeug.fahrzeugtype\"\n      ></hs-update-fahrzeugtyp>\n      <hs-update-kilometerstand\n        [updateForm]=\"updateForm\"\n        [currentValue]=\"fahrzeug.kilometerstand\"\n      ></hs-update-kilometerstand>\n      <hs-update-fahrzeughalter\n        [updateForm]=\"updateForm\"\n        [currentValueVorname]=\"fahrzeug.fahrzeughalter.vorname\"\n        [currentValueNachname]=\"fahrzeug.fahrzeughalter.nachname\"\n      ></hs-update-fahrzeughalter>\n\n      <button\n        type=\"submit\"\n        class=\"btn btn-tertiary d-flex align-items-center ms-1\"\n        [disabled]=\"updateForm.pristine || updateForm.invalid\"\n      >\n        <i class=\"material-icons\">check</i>\n        <span class=\"ms-1\">Stammdaten aktualisieren</span>\n      </button>\n    </form>\n  </div>\n</section>\n\n<hs-error-message [text]=\"errorMsg\"></hs-error-message>\n"]},"metadata":{},"sourceType":"module"}