{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Student/Desktop/Fahrzeug/Fahrzeug-A2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _CreateFahrzeugComponent_instances, _CreateFahrzeugComponent_setProps, _CreateFahrzeugComponent_handleError, _CreateFahrzeugComponent_navigateHome;\n\nimport { __classPrivateFieldGet, __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { toFahrzeug } from './fahrzeugForm'; // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n\nimport { SaveError } from '../shared';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport log from 'loglevel';\n/**\r\n * component for the tag <create-fahrzeug>\r\n */\n\nlet CreateFahrzeugComponent = class CreateFahrzeugComponent {\n  constructor(service, router, titleService) {\n    this.service = service;\n    this.router = router;\n    this.titleService = titleService;\n\n    _CreateFahrzeugComponent_instances.add(this);\n\n    this.createForm = new FormGroup({});\n    this.showWarning = false;\n    this.fertig = false;\n    this.errorMsg = undefined;\n    log.debug('CreateFahrzeugComponent.constructor: Injizierter Router:', router);\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Neues Fahrzeug');\n  }\n  /**\r\n   * this method realizes the onSubmit event handler for a new Fahrzeug\r\n   * @return false, to cancel the event\r\n   */\n\n\n  onSubmit() {\n    if (this.createForm.invalid) {\n      log.debug('CreateFahrzeugComponent.onSave: Validierungsfehler', this.createForm);\n    }\n\n    const fahrzeugForm = this.createForm.value;\n    const neuesFahrzeug = toFahrzeug(fahrzeugForm);\n    log.debug('CreateFahrzeugComponent.onSave: neuesFahrzeug=', neuesFahrzeug);\n    this.service.save(neuesFahrzeug).pipe(first(), tap(result => __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_setProps).call(this, result))).subscribe({\n      next: () => __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_navigateHome).call(this)\n    });\n  }\n\n};\n_CreateFahrzeugComponent_instances = new WeakSet(), _CreateFahrzeugComponent_setProps = function _CreateFahrzeugComponent_setProps(result) {\n  if (result instanceof SaveError) {\n    __classPrivateFieldGet(this, _CreateFahrzeugComponent_instances, \"m\", _CreateFahrzeugComponent_handleError).call(this, result);\n\n    return;\n  }\n\n  this.fertig = true;\n  this.showWarning = false;\n  this.errorMsg = undefined;\n  const id = result;\n  log.debug('CreateFahrzeugComponent.#setProps: id=', id);\n}, _CreateFahrzeugComponent_handleError = function _CreateFahrzeugComponent_handleError(err) {\n  const {\n    statuscode\n  } = err;\n  log.debug(`CreateFahrzeugComponent.#handleError: statuscode=${statuscode}, err=`, err);\n\n  switch (statuscode) {\n    case 422\n    /* UnprocessableEntity */\n    :\n      {\n        const {\n          cause\n        } = err; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n        this.errorMsg = cause instanceof HttpErrorResponse ? cause.error : JSON.stringify(cause);\n        break;\n      }\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen. Bitte versuchen Sie es sp√§ter noch einmal.';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n      log.error('Laeuft der Appserver? Port-Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n      break;\n  }\n}, _CreateFahrzeugComponent_navigateHome = /*#__PURE__*/function () {\n  var _CreateFahrzeugComponent_navigateHome2 = _asyncToGenerator(function* () {\n    if (this.errorMsg === undefined) {\n      log.debug('CreateFahrzeugComponent.#navigateHome: Navigation');\n      yield this.router.navigate(['/']);\n    }\n  });\n\n  function _CreateFahrzeugComponent_navigateHome() {\n    return _CreateFahrzeugComponent_navigateHome2.apply(this, arguments);\n  }\n\n  return _CreateFahrzeugComponent_navigateHome;\n}();\nCreateFahrzeugComponent = __decorate([Component({\n  selector: 'hs-create-fahrzeug',\n  templateUrl: './create-fahrzeug.component.html'\n})], CreateFahrzeugComponent);\nexport { CreateFahrzeugComponent };","map":{"version":3,"mappings":"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","names":["Component","toFahrzeug","SaveError","HttpErrorResponse","first","tap","FormGroup","log","CreateFahrzeugComponent","constructor","service","router","titleService","undefined","debug","ngOnInit","setTitle","onSubmit","createForm","invalid","fahrzeugForm","value","neuesFahrzeug","save","pipe","result","__classPrivateFieldGet","_CreateFahrzeugComponent_instances","_CreateFahrzeugComponent_setProps","call","subscribe","next","_CreateFahrzeugComponent_navigateHome","_CreateFahrzeugComponent_handleError","fertig","showWarning","errorMsg","id","err","statuscode","cause","error","JSON","stringify","navigate","selector","templateUrl"],"sourceRoot":"","sources":["C:\\Users\\Student\\Desktop\\Fahrzeug\\Fahrzeug-A2\\src\\app\\fahrzeug\\create-fahrzeug\\create-fahrzeug.component.ts"],"sourcesContent":["import { Component, type OnInit } from '@angular/core';\nimport { type FahrzeugForm, toFahrzeug } from './fahrzeugForm';\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport { FahrzeugWriteService, SaveError } from '../shared';\nimport { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Title } from '@angular/platform-browser'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport log from 'loglevel';\n\n/**\n * component for the tag <create-fahrzeug>\n */\n@Component({\n    selector: 'hs-create-fahrzeug',\n    templateUrl: './create-fahrzeug.component.html',\n})\nexport class CreateFahrzeugComponent implements OnInit {\n    readonly createForm = new FormGroup({});\n\n    showWarning = false;\n\n    fertig = false;\n\n    errorMsg: string | undefined = undefined;\n\n    constructor(\n        private readonly service: FahrzeugWriteService,\n        private readonly router: Router,\n        private readonly titleService: Title,\n    ) {\n        log.debug(\n            'CreateFahrzeugComponent.constructor: Injizierter Router:',\n            router,\n        );\n    }\n\n    ngOnInit() {\n        this.titleService.setTitle('Neues Fahrzeug');\n    }\n\n    /**\n     * this method realizes the onSubmit event handler for a new Fahrzeug\n     * @return false, to cancel the event\n     */\n    onSubmit() {\n        if (this.createForm.invalid) {\n            log.debug(\n                'CreateFahrzeugComponent.onSave: Validierungsfehler',\n                this.createForm,\n            );\n        }\n\n        const fahrzeugForm = this.createForm.value as FahrzeugForm;\n        const neuesFahrzeug = toFahrzeug(fahrzeugForm);\n        log.debug(\n            'CreateFahrzeugComponent.onSave: neuesFahrzeug=',\n            neuesFahrzeug,\n        );\n\n        this.service\n            .save(neuesFahrzeug)\n            .pipe(\n                first(),\n                tap(result => this.#setProps(result)),\n            )\n            .subscribe({ next: () => this.#navigateHome() });\n    }\n\n    #setProps(result: SaveError | string) {\n        if (result instanceof SaveError) {\n            this.#handleError(result);\n            return;\n        }\n\n        this.fertig = true;\n        this.showWarning = false;\n        this.errorMsg = undefined;\n\n        const id = result;\n        log.debug('CreateFahrzeugComponent.#setProps: id=', id);\n    }\n\n    #handleError(err: SaveError) {\n        const { statuscode } = err;\n        log.debug(\n            `CreateFahrzeugComponent.#handleError: statuscode=${statuscode}, err=`,\n            err,\n        );\n\n        switch (statuscode) {\n            case HttpStatusCode.UnprocessableEntity: {\n                const { cause } = err;\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this.errorMsg =\n                    cause instanceof HttpErrorResponse\n                        ? cause.error\n                        : JSON.stringify(cause);\n                break;\n            }\n\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg =\n                    'Zu viele Anfragen. Bitte versuchen Sie es sp√§ter noch einmal.';\n                break;\n\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Ein interner Fehler ist aufgetreten.';\n                log.error('Laeuft der Appserver? Port-Forwarding?');\n                break;\n\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten.';\n                break;\n        }\n    }\n\n    async #navigateHome() {\n        if (this.errorMsg === undefined) {\n            log.debug('CreateFahrzeugComponent.#navigateHome: Navigation');\n            await this.router.navigate(['/']);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}